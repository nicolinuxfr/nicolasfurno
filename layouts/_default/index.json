{{- $.Scratch.Add "index" slice -}}
{{- range (where .Site.RegularPages "Type" "ne" "pages") -}}
    {{ $contenu := replace (.Content | plainify) ", " " " }}
    {{ $contenu = replace $contenu "â€™" " " }}
    {{ $contenu = replace $contenu "." " " }}
    {{ $contenu := split (lower $contenu ) " " | complement .Site.Data.stopwords }}
    {{- $.Scratch.Add "index" (dict "title" ( .Title | markdownify) "section" ( (site.GetPage .Section ).Title ) "permalink" .Permalink "content" $contenu ) -}}
{{- end -}}
{{- $.Scratch.Get "index" | jsonify -}}