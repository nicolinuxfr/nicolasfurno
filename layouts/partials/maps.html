<script src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js"></script>

<style>
#map {
    width: 100%;
    height: 600px;
}
</style>

<body>
<div id="map"></div>

{{ $token := getenv "HUGO_MAPKIT" }}

<script>
    const tokenID = "{{ $token }}";
    const coordonnees = {{ . }};

    mapkit.init({
        authorizationCallback: function(done) {
            done(tokenID);
        },
        language:"fr",
        mapType: "Hybrid"
    });

    var region = new mapkit.CoordinateRegion(
        new mapkit.Coordinate(coordonnees[0].lat, coordonnees[0].long),
        new mapkit.CoordinateSpan(0.010, 0.010)
    );

    var map = new mapkit.Map("map", {
        region: region,
        mapType: mapkit.Map.MapTypes.Hybrid
    });

    coordonnees.forEach((location) => {
        let marker = new mapkit.MarkerAnnotation(new mapkit.Coordinate(location.lat, location.long));
        map.addAnnotation(marker);
    });

var MarkerAnnotation = mapkit.MarkerAnnotation;

</script>