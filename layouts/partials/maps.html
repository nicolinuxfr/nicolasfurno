<script src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js"></script>

<style>
#map {
    width: 100%;
    height: 600px;
}
</style>

<body>
<div id="map"></div>

{{ $token := getenv "HUGO_MAPKIT" }}

<script>
    const tokenID = "{{ $token }}";
    
    mapkit.init({
        authorizationCallback: function(done) {
            done(tokenID);
        },
        language:"fr",
        mapType: "Hybrid"
    });
 
    var region = new mapkit.CoordinateRegion(
        new mapkit.Coordinate({{ .Lat }}, {{ .Long }}),
        new mapkit.CoordinateSpan(0.030, 0.030)
    );



var map = new mapkit.Map("map", {
    region: region,
    mapType: mapkit.Map.MapTypes.Hybrid
});

{{ }}
const locations = [
    {lat: 46.233226, lng: 6.055737},
    {lat: 46.2278, lng: 6.0510},
    {lat: 46.23336, lng: 6.0471}
];
locations.forEach((location) => {
    let marker = new mapkit.MarkerAnnotation(new mapkit.Coordinate(location.lat, location.lng));
    map.addAnnotation(marker);
});

var MarkerAnnotation = mapkit.MarkerAnnotation;

var photo = new mapkit.Coordinate({{ .Lat }}, {{ .Long }})
var photoAnnotation = new MarkerAnnotation(photo, { color: "#487b00"});

map.showItems([photoAnnotation]);

</script>